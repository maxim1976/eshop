# Railway.com Production Deployment Guide

## Your Production Site
üöÄ **Production URL**: https://eshop-production-8a1d.up.railway.app  
üîó **Port**: 8080  
üè¢ **Platform**: Railway.com Metal Edge

## Deployment Status ‚úÖ

### 1. Configuration Complete
- ‚úÖ Production settings configured for Railway
- ‚úÖ WhiteNoise added for static files
- ‚úÖ Database configuration with PostgreSQL
- ‚úÖ Security settings for HTTPS
- ‚úÖ CORS and CSRF protection
- ‚úÖ Health check endpoint at `/health/`

### 2. Required Environment Variables for Railway

Set these in your Railway project dashboard:

```bash
# Core Django Settings
SECRET_KEY=your-super-secret-key-generate-new-one
DEBUG=False
DJANGO_SETTINGS_MODULE=eshop.settings.production
RAILWAY_ENVIRONMENT=production

# Domain Configuration
ALLOWED_HOSTS=eshop-production-8a1d.up.railway.app
CORS_ALLOWED_ORIGINS=https://eshop-production-8a1d.up.railway.app
CSRF_TRUSTED_ORIGINS=https://eshop-production-8a1d.up.railway.app
SITE_URL=https://eshop-production-8a1d.up.railway.app

# Database (Railway provides this automatically)
DATABASE_URL=postgresql://... (auto-generated by Railway PostgreSQL addon)

# Port (Railway sets this automatically to 8080)
PORT=8080
```

### 3. Optional Environment Variables

```bash
# Email Configuration (for password reset, notifications)
EMAIL_HOST=smtp.sendgrid.net
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-sendgrid-username
EMAIL_HOST_PASSWORD=your-sendgrid-password
DEFAULT_FROM_EMAIL=noreply@eshop-production-8a1d.up.railway.app

# ECPay Payment Gateway (Taiwan)
ECPAY_MERCHANT_ID=your-production-merchant-id
ECPAY_HASH_KEY=your-production-hash-key
ECPAY_HASH_IV=your-production-hash-iv
ECPAY_SANDBOX=False
```

### 4. Deployment Process

1. **Push to GitHub** (already done):
   ```bash
   git push origin 001-user-registration-and
   ```

2. **Railway Deployment**:
   - Railway automatically deploys from your GitHub repository
   - Uses the `Procfile` for build and run commands
   - Runs migrations, compiles translations, collects static files

3. **Build Command** (automatic via Procfile):
   ```bash
   python manage.py migrate && 
   python manage.py compilemessages && 
   python manage.py collectstatic --noinput && 
   gunicorn --bind 0.0.0.0:$PORT eshop.wsgi:application
   ```

### 5. Features Ready for Production

#### ‚úÖ Multilingual Support
- Traditional Chinese (zh-hant) - Primary
- English (en) - Secondary
- Translation files compiled and ready

#### ‚úÖ Security Features
- HTTPS enforced
- CSRF protection enabled
- Secure cookies
- XSS protection
- Content type sniffing protection

#### ‚úÖ Taiwan E-commerce Features
- ECPay payment gateway integration
- Traditional Chinese interface
- Taiwan-compliant security settings
- PDPA-ready user model

#### ‚úÖ Performance Optimizations
- Static files compression with WhiteNoise
- Database query optimization
- Proper indexing

### 6. Post-Deployment Checklist

#### Immediately After Deployment:
1. ‚úÖ Visit https://eshop-production-8a1d.up.railway.app/health/ - should return `{"status": "healthy", "service": "eshop"}`
2. ‚úÖ Check homepage loads correctly
3. ‚úÖ Verify language switching works (Traditional Chinese/English)
4. ‚úÖ Test admin access at `/admin/`

#### Create Admin User:
```bash
# Run this command in Railway's terminal or through their CLI
python manage.py createsuperuser
```

#### Verify Core Functions:
- [ ] User registration works
- [ ] User login works
- [ ] Product browsing works
- [ ] Category navigation works
- [ ] Language switching works
- [ ] Admin interface accessible

### 7. Monitoring & Health

- **Health Check**: https://eshop-production-8a1d.up.railway.app/health/
- **Admin Panel**: https://eshop-production-8a1d.up.railway.app/admin/
- **Railway Dashboard**: Monitor logs, metrics, and deployments

### 8. Security Notes

#### üîí Production Security Enabled:
- Debug mode disabled
- Secure cookies enabled
- HTTPS-only security headers
- HSTS enabled (1 year)
- XSS and content-type protections

#### üõ°Ô∏è Taiwan Privacy Compliance:
- PDPA-compliant user model
- Data protection ready
- Secure session handling

### 9. Next Steps

1. **Set Environment Variables**: Configure the required variables in Railway dashboard
2. **Test Deployment**: Verify all features work in production
3. **Configure Email**: Set up SendGrid or similar for email notifications
4. **Payment Setup**: Configure ECPay with production credentials
5. **SSL Certificate**: Railway handles this automatically
6. **Domain Setup**: Configure custom domain if needed

### 10. Troubleshooting

#### Common Issues:
- **500 Error**: Check environment variables are set correctly
- **Static Files**: WhiteNoise should handle automatically
- **Database**: Railway PostgreSQL should connect automatically
- **Logs**: Check Railway dashboard logs for errors

#### Debug Commands:
```bash
# Check environment
python manage.py check --deploy

# Test database connection
python manage.py dbshell

# Check static files
python manage.py collectstatic --dry-run
```

## Production Ready! üéâ

Your e-commerce platform is now configured for production deployment on Railway.com with:
- Taiwan market focus (Traditional Chinese)
- ECPay payment integration ready
- Security best practices
- Scalable architecture
- Professional deployment setup
